<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. AWS環境の準備 &mdash; awsiot-handson-basic v0.0 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '0.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="top" title="awsiot-handson-basic v0.0 documentation" href="index.html" />
    <link rel="next" title="3. インテルEdisonの設定" href="03.html" />
    <link rel="prev" title="1. イントロダクション" href="01.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="03.html" title="3. インテルEdisonの設定"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="01.html" title="1. イントロダクション"
             accesskey="P">前へ</a> |</li>
        <li><a href="index.html">awsiot-handson-basic v0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="aws">
<h1>2. AWS環境の準備<a class="headerlink" href="#aws" title="このヘッドラインへのパーマリンク">¶</a></h1>
<div class="section" id="cloudformation">
<h2>2.1. CloudFormationを使って自動作成<a class="headerlink" href="#cloudformation" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以下のハンズオンで必要なAWS IoT以外のサービスについてはCloudFormationを使って自動作成します。CloudFormationはスタックの中にこれらのリソースを作成し、一括して削除などができます。</p>
<dl class="docutils">
<dt>IAMユーザ</dt>
<dd>Edisonで認証に利用する証明書の登録作業を実施する際に使用するユーザ</dd>
<dt>IAMロール</dt>
<dd>AWS IoTやブラウザがAWSサービスにアクセスするために使用するロール</dd>
<dt>IAMポリシー</dt>
<dd>AWS IoTやブラウザが使用する各ロールがどのサービスに、どのような操作を行って良いか定義するポリシー</dd>
<dt>DynamoDBテーブル</dt>
<dd>シナリオ１でセンサーデータを保存するためのテーブル</dd>
<dt>SNSトピック/サブスクリプション</dt>
<dd>シナリオ１でメール通知するためのSNS設定</dd>
<dt>Lambdaファンクション</dt>
<dd>WebブラウザからのリクエストでAWS IoTからデータを取得したり、データを設定するためのファンクション</dd>
</dl>
<p>マネージメントコンソールを開き、右上のリージョン一覧から[米国東部（バージニア北部）]を選択します。</p>
<img alt="_images/2-regions-us&#64;2x.png" src="_images/2-regions-us&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>サービス一覧から[Cloud Formation]をクリックして開きます。[Create Stack]をクリックします。</p>
<img alt="_images/2-cf-1&#64;2x.png" src="_images/2-cf-1&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>[Select Template]では[Choose a template]で[Specify an Amazon S3 template URL]を選択し、以下のパスを入力し、[Next]をクリックします。</p>
<p><a class="reference external" href="https://s3-ap-northeast-1.amazonaws.com/awsiot-handson-dojo-jp/aws-iot-handson-dojyo-basic.yml">https://s3-ap-northeast-1.amazonaws.com/awsiot-handson-dojo-jp/aws-iot-handson-dojyo-basic.yml</a></p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="_images/2-cf-2&#64;2x.png" src="_images/2-cf-2&#64;2x.png" />
<p>[Specify Details]で[Stack Name]に”AWSIoTHandsonStack-&lt;参加者番号&gt;”と入力し、[AdministratorEmail]にシナリオ１で使用するメールの通知先を入力します。そして[Next]をクリックします。</p>
<img alt="_images/2-cf-3&#64;2x.png" src="_images/2-cf-3&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>[Options]で何も入力せずに[Next]をクリックします。</p>
<img alt="_images/2-cf-4&#64;2x.png" src="_images/2-cf-4&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>[Review]の画面を下にスクロールし、[Capabilities]で[I acknowledge that this template...]にチェックを入れ、[Create]をクリックします。</p>
<img alt="_images/2-cf-5&#64;2x.png" src="_images/2-cf-5&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Cloud Formationのスタックの一覧に作成したスタックが表示されるのを確認します。Statusが[CREATE_IN_PROGRESS]から[CREATE_COMPLETE]になるのを待ちます。</p>
<img alt="_images/2-cf-6&#64;2x.png" src="_images/2-cf-6&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="_images/2-cf-7&#64;2x.png" src="_images/2-cf-7&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>画面下の[Output]タブを選択し、[Value]の内容を全てメモ帳などにコピーします。</p>
<img alt="_images/2-cf-8&#64;2x.png" src="_images/2-cf-8&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="cognito-identity">
<h2>2.2. Cognito Identityを手動作成<a class="headerlink" href="#cognito-identity" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>シナリオ１，２で使用するWebアプリで匿名認証を行うために使用するCognito Identityを作成します。Cognitoは現時点でCloudFormationに対応していないため、手動で作成します。マネージメントコンソールのサービス一覧から[Cognito]をクリックして開き、[Manage Federated Identities]をクリックします。</p>
<img alt="_images/2-cognito-1&#64;2x.png" src="_images/2-cognito-1&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>[Create new identity pool]の[Identity pool name]に”AWSIoTHandson &lt;参加者番号&gt;”と入力し、[Enable access to unauthenticated identities]にチェックを入れ、[Create Pool]をクリックします。</p>
<img alt="_images/2-cognito-2&#64;2x.png" src="_images/2-cognito-2&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>[許可]をクリックします。</p>
<img alt="_images/2-cognito-3&#64;2x.png" src="_images/2-cognito-3&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>以下のように[Get AWS Credetials]に表示されているIdentity Pool IDをメモ帳などにコピーします。</p>
<img alt="_images/2-cognito-4-us&#64;2x.png" src="_images/2-cognito-4-us&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>マネージメントコンソールのサービス一覧から[IAM]を開き、左側のメニューから[ロール]を選択します。ロールの一覧から”Cognito_AWSIoTHandson&lt;参加者番号&gt;Unauth_Role”をクリックします。</p>
<img alt="_images/2-cognito-5&#64;2x.png" src="_images/2-cognito-5&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>[アクセス許可]のタブを選択し、管理ポリシーの[ポリシーのアタッチ]をクリックします。</p>
<img alt="_images/2-cognito-6&#64;2x.png" src="_images/2-cognito-6&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>フィルタに”HandsonStack-&lt;参加者番号&gt;”と入力して絞込を行い、表示されたポリシー”AWSIoTHandsonStack-&lt;参加者番号&gt;-WebAppPolicy-&lt;英数字&gt;”を選択し、[ポリシーのアタッチ]をクリックします。</p>
<img alt="_images/2-cognito-7&#64;2x.png" src="_images/2-cognito-7&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>[管理ポリシー]に”AWSIoTHandsonStack-&lt;参加者番号&gt;-WebAppPolicy-&lt;英数字&gt;”ポリシーが表示されていることを確認します。</p>
<img alt="_images/2-cognito-8&#64;2x.png" src="_images/2-cognito-8&#64;2x.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">目次</a></h3>
            <ul>
<li><a class="reference external" href="#">2. AWS環境の準備</a><ul>
<li><a class="reference external" href="#cloudformation">2.1. CloudFormationを使って自動作成</a></li>
<li><a class="reference external" href="#cognito-identity">2.2. Cognito Identityを手動作成</a></li>
</ul>
</li>
</ul>

            <h4>前のトピックへ</h4>
            <p class="topless"><a href="01.html"
                                  title="前の章へ">1. イントロダクション</a></p>
            <h4>次のトピックへ</h4>
            <p class="topless"><a href="03.html"
                                  title="次の章へ">3. インテルEdisonの設定</a></p>
            <h3>このページ</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/02.txt"
                     rel="nofollow">ソースコードを表示</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>クイック検索</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="検索" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="03.html" title="3. インテルEdisonの設定"
             >次へ</a> |</li>
        <li class="right" >
          <a href="01.html" title="1. イントロダクション"
             >前へ</a> |</li>
        <li><a href="index.html">awsiot-handson-basic v0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2017, ikeyoshy.
      このドキュメントは <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.5 で生成しました。
    </div>
  </body>
</html>